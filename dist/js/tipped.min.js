/*!
 * Tipped - A complete Tooltip solution based on jQuery - v4.8.1
 * (c) 2012-2021 Nick Stakenburg
 *
 * https://github.com/staaky/tipped
 *
 * @license: https://creativecommons.org/licenses/by/4.0
 */
!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=i(require("jquery")):t.Tipped=i(jQuery)}(this,function($){var Tipped={};$.extend(Tipped,{version:"4.8.1"}),Tipped.Skins={base:{afterUpdate:!1,ajax:{},cache:!0,container:!1,containment:{selector:"viewport",padding:5},close:!1,detach:!0,fadeIn:200,fadeOut:200,showDelay:75,hideDelay:25,hideAfter:!1,hideOn:{element:"mouseleave"},hideOthers:!1,position:"top",inline:!1,offset:{x:0,y:0},onHide:!1,onShow:!1,padding:!0,radius:!0,shadow:!0,showOn:{element:"mousemove"},size:"medium",spinner:!0,stem:!0,target:"element",voila:!0},reset:{ajax:!1,hideOn:{element:"mouseleave",tooltip:"mouseleave"},showOn:{element:"mouseenter",tooltip:"mouseenter"}}},$.each("dark light gray red green blue lightyellow lightblue lightpink".split(" "),function(t,i){Tipped.Skins[i]={}});var Browser=(e=navigator.userAgent,{IE:!(!window.attachEvent||-1!==e.indexOf("Opera"))&&f("MSIE "),Opera:-1<e.indexOf("Opera")&&(!!window.opera&&opera.version&&parseFloat(opera.version())||7.55),WebKit:-1<e.indexOf("AppleWebKit/")&&f("AppleWebKit/"),Gecko:-1<e.indexOf("Gecko")&&-1===e.indexOf("KHTML")&&f("rv:"),MobileSafari:!!e.match(/Apple.*Mobile.*Safari/),Chrome:-1<e.indexOf("Chrome")&&f("Chrome/"),ChromeMobile:-1<e.indexOf("CrMo")&&f("CrMo/"),Android:-1<e.indexOf("Android")&&f("Android "),IEMobile:-1<e.indexOf("IEMobile")&&f("IEMobile/")}),e;function f(t){t=new RegExp(t+"([\\d.]+)").exec(e);return!t||parseFloat(t[1])}var Support=(i=document.createElement("div"),j="Webkit Moz O ms Khtml".split(" "),{css:{animation:m("animation"),transform:m("transform"),prefixed:function(t){return m(t,"prefix")}},shadow:m("boxShadow")&&m("pointerEvents"),touch:function(){try{return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(t){return!1}}()}),i,j;function m(t,e){var s=t.charAt(0).toUpperCase()+t.substr(1);return function(t,e){for(var s in t)if(void 0!==i.style[t[s]])return"prefix"!==e||t[s];return!1}((t+" "+j.join(s+" ")+s).split(" "),e)}var _slice=Array.prototype.slice,_={wrap:function(t,i){var e=t;return function(){var t=[e.bind(this)].concat(_slice.call(arguments));return i.apply(this,t)}},isElement:function(t){return t&&1===t.nodeType},isText:function(t){return t&&3===t.nodeType},isDocumentFragment:function(t){return t&&11===t.nodeType},delay:function(t,i){var e=_slice.call(arguments,2);return setTimeout(function(){return t.apply(t,e)},i)},defer:function(t){return _.delay.apply(this,[t,1].concat(_slice.call(arguments,1)))},pointer:function(t){return{x:t.pageX,y:t.pageY}},element:{isAttached:function(t){t=function(t){for(var i=t;i&&i.parentNode;)i=i.parentNode;return i}(t);return!(!t||!t.body)}}};function degrees(t){return 180*t/Math.PI}function radian(t){return t*Math.PI/180}function sec(t){return 1/Math.cos(t)}function sfcc(t){return String.fromCharCode.apply(String,t.replace(" ","").split(","))}function deepExtend(t,i){for(var e in i)i[e]&&i[e].constructor&&i[e].constructor===Object?(t[e]=$.extend({},t[e])||{},deepExtend(t[e],i[e])):t[e]=i[e];return t}var getUID=(U=0,function(t){for(t=t||"_tipped-uid-",U++;document.getElementById(t+U);)U++;return t+U}),U,Position={positions:["topleft","topmiddle","topright","righttop","rightmiddle","rightbottom","bottomright","bottommiddle","bottomleft","leftbottom","leftmiddle","lefttop"],regex:{toOrientation:/^(top|left|bottom|right)(top|left|bottom|right|middle|center)$/,horizontal:/^(top|bottom)/,isCenter:/(middle|center)/,side:/^(top|bottom|left|right)/},toDimension:(X={top:"height",left:"width",bottom:"height",right:"width"},function(t){return X[t]}),isCenter:function(t){return!!t.toLowerCase().match(this.regex.isCenter)},isCorner:function(t){return!this.isCenter(t)},getOrientation:function(t){return t.toLowerCase().match(this.regex.horizontal)?"horizontal":"vertical"},getSide:function(t){var i=null,t=t.toLowerCase().match(this.regex.side);return i=t&&t[1]?t[1]:i},split:function(t){return t.toLowerCase().match(this.regex.toOrientation)},_flip:{top:"bottom",bottom:"top",left:"right",right:"left"},flip:function(t,i){var e=this.split(t);return i?this.inverseCornerPlane(this.flip(this.inverseCornerPlane(t))):this._flip[e[1]]+e[2]},inverseCornerPlane:function(t){if(Position.isCorner(t)){var i=this.split(t);return i[2]+i[1]}return t},adjustOffsetBasedOnPosition:function(t,i,e){var s=$.extend({},t),o={horizontal:"x",vertical:"y"},t=Position.getOrientation(i);return t===Position.getOrientation(e)?Position.getSide(i)!==Position.getSide(e)&&(s[{x:"y",y:"x"}[o[t]]]*=-1):(t=s.x,s.x=s.y,s.y=t,(i={top:{right:"x"},bottom:{left:"x"},left:{bottom:"y"},right:{top:"y"}}[Position.getSide(i)][Position.getSide(e)])&&(s[i]*=-1),s[o[Position.getOrientation(e)]]=0),s},getBoxFromPoints:function(t,i,e,s){var o=Math.min(t,e),t=Math.max(t,e),e=Math.min(i,s),s=Math.max(i,s);return{left:o,top:e,width:Math.max(t-o,0),height:Math.max(s-e,0)}},isPointWithinBox:function(t,i,e,s,o,n){n=this.getBoxFromPoints(e,s,o,n);return t>=n.left&&t<=n.left+n.width&&i>=n.top&&i<=n.top+n.height},isPointWithinBoxLayout:function(t,i,e){return this.isPointWithinBox(t,i,e.position.left,e.position.top,e.position.left+e.dimensions.width,e.position.top+e.dimensions.height)},getDistance:function(t,i,e,s){return Math.sqrt(Math.pow(Math.abs(e-t),2)+Math.pow(Math.abs(s-i),2))},intersectsLine:function(t,i,e,s,o,n,h,r,a){if(!a)return Sa(t,i,o,n,h,r)!=Sa(e,s,o,n,h,r)&&Sa(t,i,e,s,o,n)!=Sa(t,i,e,s,h,r);var a=e-t,e=s-i,s=h-o,h=r-n,r=(-e*(t-o)+a*(i-n))/(-s*e+a*h),h=(s*(i-n)-h*(t-o))/(-s*e+a*h);return 0<=r&&r<=1&&0<=h&&h<=1&&{x:t+h*a,y:i+h*e}}},X;function Sa(t,i,e,s,o,n){return 0<(t=(n-i)*(e-t)-(s-i)*(o-t))||!(t<0)}var Bounds={viewport:function(){var t=Browser.MobileSafari||Browser.Android&&Browser.Gecko?{width:window.innerWidth,height:window.innerHeight}:{height:$(window).height(),width:$(window).width()};return t}},Mouse={_buffer:{pageX:0,pageY:0},_dimensions:{width:30,height:30},_shift:{x:2,y:10},getPosition:function(t){t=this.getActualPosition(t);return{left:t.left-Math.round(.5*this._dimensions.width)+this._shift.x,top:t.top-Math.round(.5*this._dimensions.height)+this._shift.y}},getActualPosition:function(t){t=t&&"number"==typeof t.pageX?t:this._buffer;return{left:t.pageX,top:t.pageY}},getDimensions:function(){return this._dimensions}},Color=(u0={_default:"#000000",aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},{toRGB:function(t){if(/^rgba?\(/.test(t))return"#"+v0((i=(i=t).match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/))[1])+v0(i[2])+v0(i[3]);var i,t=(t=u0[t]?u0[t]:t).replace("#","");return/^(?:[0-9a-fA-F]{3}){1,2}$/.test(t)?"#"+(t=3==t.length?t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2):t):u0._default}}),u0;function v0(t){return("0"+parseInt(t).toString(16)).slice(-2)}function Spin(){return this.initialize.apply(this,_slice.call(arguments))}function Visible(){return this.initialize.apply(this,_slice.call(arguments))}Spin.supported=Support.css.transform&&Support.css.animation,$.extend(Spin.prototype,{initialize:function(){this.options=$.extend({},arguments[0]||{}),this.build(),this.start()},build:function(){var t=2*(this.options.length+this.options.radius),t={height:t,width:t};this.element=$("<div>").addClass("tpd-spin").css(t),this.element.append(this._rotate=$("<div>").addClass("tpd-spin-rotate")),this.element.css({"margin-left":-.5*t.width,"margin-top":-.5*t.height});for(var i,e=this.options.lines,s=0;s<e;s++){this._rotate.append(i=$("<div>").addClass("tpd-spin-frame").append(o=$("<div>").addClass("tpd-spin-line"))),o.css({"background-color":this.options.color,width:this.options.width,height:this.options.length,"margin-left":-.5*this.options.width,"border-radius":Math.round(.5*this.options.width)}),i.css({opacity:(1/e*(s+1)).toFixed(2)});var o={};o[Support.css.prefixed("transform")]="rotate("+360/e*(s+1)+"deg)",i.css(o)}},start:function(){var t={};t[Support.css.prefixed("animation")]="tpd-spin 1s infinite steps("+this.options.lines+")",this._rotate.css(t)},stop:function(){var t={};t[Support.css.prefixed("animation")]="none",this._rotate.css(t),this.element.detach()}}),$.extend(Visible.prototype,{initialize:function(t){return t=Array.isArray(t)?t:[t],this.elements=t,this._restore=[],$.each(t,function(t,i){var e=$(i).is(":visible");e||$(i).show(),this._restore.push({element:i,visible:e})}.bind(this)),this},restore:function(){$.each(this._restore,function(t,i){i.visible||$(i.element).show()}),this._restore=null}});var AjaxCache=(Q0=[],{get:function(t){for(var i=null,e=0;e<Q0.length;e++)Q0[e]&&Q0[e].url===t.url&&(Q0[e].type||"GET").toUpperCase()===(t.type||"GET").toUpperCase()&&$.param(Q0[e].data||{})===$.param(t.data||{})&&(i=Q0[e]);return i},set:function(t,i,e){var s=this.get(t);s||(s=$.extend({callbacks:{}},t),Q0.push(s)),s.callbacks[i]=e},remove:function(t){for(var i=0;i<Q0.length;i++)Q0[i]&&Q0[i].url===t&&delete Q0[i]},clear:function(){Q0=[]}}),Q0,Voila=function(n){function h(t,i,e){if(!(this instanceof h))return new h(t,i,e);var s=typeof i,o="function"==s?i:"function"==typeof e&&e;return this.options=n.extend({method:"onload"},"object"==s?i:{}),this.deferred=new jQuery.Deferred,o&&this.always(o),this._processed=0,this.images=[],this._add(t),this}n.extend(h.prototype,{_add:function(t){t="string"==typeof t?n(t):t instanceof jQuery||0<t.length?t:[t];n.each(t,function(t,i){var e=n(),i=n(i);(e=i.is("img")?e.add(i):e.add(i.find("img"))).each(function(t,i){this.images.push(new s(i,function(t){this._progress(t)}.bind(this),function(t){this._progress(t)}.bind(this),this.options))}.bind(this))}.bind(this)),this.images.length<1&&setTimeout(function(){this._resolve()}.bind(this))},abort:function(){this._progress=this._notify=this._reject=this._resolve=function(){},n.each(this.images,function(t,i){i.abort()}),this.images=[]},_progress:function(t){this._processed++,t.isLoaded||(this._broken=!0),this._notify(t),this._processed===this.images.length&&this[this._broken?"_reject":"_resolve"]()},_notify:function(t){this.deferred.notify(this,t)},_reject:function(){this.deferred.reject(this)},_resolve:function(){this.deferred.resolve(this)},always:function(t){return this.deferred.always(t),this},done:function(t){return this.deferred.done(t),this},fail:function(t){return this.deferred.fail(t),this},progress:function(t){return this.deferred.progress(t),this}});var s=function(s){function t(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}s.extend(t.prototype,{initialize:function(){this.options=s.extend({test:function(){},success:function(){},timeout:function(){},callAt:!1,intervals:[[0,0],[1e3,10],[2e3,50],[4e3,100],[2e4,500]]},arguments[0]||{}),this._test=this.options.test,this._success=this.options.success,this._timeout=this.options.timeout,this._ipos=0,this._time=0,this._delay=this.options.intervals[this._ipos][1],this._callTimeouts=[],this.poll(),this._createCallsAt()},poll:function(){this._polling=setTimeout(function(){if(this._test())this.success();else{if(this._time+=this._delay,this._time>=this.options.intervals[this._ipos][0]){if(!this.options.intervals[this._ipos+1])return void("function"==typeof this._timeout&&this._timeout());this._ipos++,this._delay=this.options.intervals[this._ipos][1]}this.poll()}}.bind(this),this._delay)},success:function(){this.abort(),this._success()},_createCallsAt:function(){this.options.callAt&&s.each(this.options.callAt,function(t,i){var e=i[0],s=i[1],e=setTimeout(function(){s()}.bind(this),e);this._callTimeouts.push(e)}.bind(this))},_stopCallTimeouts:function(){s.each(this._callTimeouts,function(t,i){clearTimeout(i)}),this._callTimeouts=[]},abort:function(){this._stopCallTimeouts(),this._polling&&(clearTimeout(this._polling),this._polling=null)}});function i(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}return s.extend(i.prototype,{supports:{naturalWidth:"naturalWidth"in new Image},initialize:function(t,i,e){this.img=s(t)[0],this.successCallback=i,this.errorCallback=e,this.isLoaded=!1,this.options=s.extend({method:"onload",pollFallbackAfter:1e3},arguments[3]||{}),"onload"!=this.options.method&&this.supports.naturalWidth?this.poll():this.load()},poll:function(){this._poll=new t({test:function(){return 0<this.img.naturalWidth}.bind(this),success:function(){this.success()}.bind(this),timeout:function(){this.error()}.bind(this),callAt:[[this.options.pollFallbackAfter,function(){this.load()}.bind(this)]]})},load:function(){this._loading=setTimeout(function(){var t=new Image;(this._onloadImage=t).onload=function(){t.onload=function(){},this.supports.naturalWidth||(this.img.naturalWidth=t.width,this.img.naturalHeight=t.height,t.naturalWidth=t.width,t.naturalHeight=t.height),this.success()}.bind(this),t.onerror=this.error.bind(this),t.src=this.img.src}.bind(this))},success:function(){this._calledSuccess||(this._calledSuccess=!0,this.abort(),this.waitForRender(function(){this.isLoaded=!0,this.successCallback(this)}.bind(this)))},error:function(){this._calledError||(this._calledError=!0,this.abort(),this._errorRenderTimeout=setTimeout(function(){this.errorCallback&&this.errorCallback(this)}.bind(this)))},abort:function(){this.stopLoading(),this.stopPolling(),this.stopWaitingForRender()},stopPolling:function(){this._poll&&(this._poll.abort(),this._poll=null)},stopLoading:function(){this._loading&&(clearTimeout(this._loading),this._loading=null),this._onloadImage&&(this._onloadImage.onload=function(){},this._onloadImage.onerror=function(){})},waitForRender:function(t){this._renderTimeout=setTimeout(t)},stopWaitingForRender:function(){this._renderTimeout&&(clearTimeout(this._renderTimeout),this._renderTimeout=null),this._errorRenderTimeout&&(clearTimeout(this._errorRenderTimeout),this._errorRenderTimeout=null)}}),i}(jQuery);return h}(jQuery);Tipped.Behaviors={hide:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"}},mouse:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"},target:"mouse",showDelay:100,fadeIn:0,hideDelay:0,fadeOut:0},sticky:{showOn:{element:"mouseenter",tooltip:"mouseenter"},hideOn:{element:"mouseleave",tooltip:"mouseleave"},showDelay:150,target:"mouse",fixed:!0}};var Options={create:Rb},Ob,Pb;function Rb(t){return Ob=Tipped.Skins.base,Pb=deepExtend($.extend({},Ob),Tipped.Skins.reset),Ub(t)}function Sb(t){return t.match(/^(top|left|bottom|right)$/)&&(t+="middle"),t.replace("center","middle").replace(" ",""),t}function Tb(t){var i,t=t.behavior&&(i=Tipped.Behaviors[t.behavior])?deepExtend($.extend({},i),t):t;return t}function Ub(t){var i=t.skin||Tooltips.options.defaultSkin,e=$.extend({},Tipped.Skins[i]||{});e.skin||(e.skin=Tooltips.options.defaultSkin||"dark");var s,i=deepExtend($.extend({},Pb),Tb(e)),e=deepExtend($.extend({},i),Tb(t));e.ajax&&(Pb.ajax,h=Ob.ajax,"boolean"==typeof e.ajax&&(e.ajax={}),e.ajax=deepExtend($.extend({},h),e.ajax));var o,n,i=Sb(i=e.position&&e.position.target||"string"==typeof e.position&&e.position||Pb.position&&Pb.position.target||"string"==typeof Pb.position&&Pb.position||Ob.position&&Ob.position.target||Ob.position),h=Sb(h=e.position&&e.position.tooltip||Pb.position&&Pb.position.tooltip||Ob.position&&Ob.position.tooltip||Tooltips.Position.getInversedPosition(i));return e.position?"string"==typeof e.position?(e.position=Sb(e.position),s={target:e.position,tooltip:Tooltips.Position.getTooltipPositionFromTarget(e.position)}):(s={tooltip:h,target:i},e.position.tooltip&&(s.tooltip=Sb(e.position.tooltip)),e.position.target&&(s.target=Sb(e.position.target))):s={tooltip:h,target:i},Position.isCorner(s.target)&&Position.getOrientation(s.target)!==Position.getOrientation(s.tooltip)&&(s.target=Position.inverseCornerPlane(s.target)),"mouse"===e.target&&(i=Position.getOrientation(s.target),s.target="horizontal"===i?s.target.replace(/(left|right)/,"middle"):s.target.replace(/(top|bottom)/,"middle")),e.position=s,"mouse"===e.target?(o=$.extend({},Ob.offset),$.extend(o,Tipped.Skins.reset.offset||{}),t.skin&&$.extend(o,(Tipped.Skins[t.skin]||Tipped.Skins[Tooltips.options.defaultSkin]||{}).offset||{}),o=Position.adjustOffsetBasedOnPosition(Ob.offset,Ob.position,s.target,!0),t.offset&&(o=$.extend(o,t.offset||{}))):o={x:e.offset.x,y:e.offset.y},e.offset=o,e.hideOn&&"click-outside"===e.hideOn&&(e.hideOnClickOutside=!0,e.hideOn=!1,e.fadeOut=0),e.showOn&&(n=e.showOn,e.showOn=n="string"==typeof n?{element:n}:n),e.hideOn&&(n=e.hideOn,e.hideOn=n="string"==typeof n?{element:n}:n),e.inline&&"string"!=typeof e.inline&&(e.inline=!1),Browser.IE&&Browser.IE<9&&$.extend(e,{fadeIn:0,fadeOut:0,hideDelay:0}),e.spinner&&(Spin.supported?"boolean"==typeof e.spinner&&(e.spinner=Pb.spinner||Ob.spinner||{}):e.spinner=!1),e.container||(e.container=document.body),e.containment&&"string"==typeof e.containment&&(e.containment={selector:e.containment,padding:Pb.containment&&Pb.containment.padding||Ob.padding&&Ob.containment.padding}),e.shadow&&(e.shadow=Support.shadow),e}function Skin(){this.initialize.apply(this,_slice.call(arguments))}function Stem(){this.initialize.apply(this,_slice.call(arguments))}$.extend(Skin.prototype,{initialize:function(t){this.tooltip=t,this.element=t._skin;var i,e,s,o=this.tooltip.options;this.tooltip._tooltip[(o.shadow?"remove":"add")+"Class"]("tpd-no-shadow")[(o.radius?"remove":"add")+"Class"]("tpd-no-radius")[(o.stem?"remove":"add")+"Class"]("tpd-no-stem");var n=Support.css.prefixed("borderTopLeftRadius");this.element.append(i=$("<div>").addClass("tpd-frames").append($("<div>").addClass("tpd-frame").append($("<div>").addClass("tpd-backgrounds").append(e=$("<div>").addClass("tpd-background").append(s=$("<div>").addClass("tpd-background-content")))))).append(o=$("<div>").addClass("tpd-spinner")),e.css({width:999,height:999,zoom:1}),this._css={border:parseFloat(e.css("border-top-width")),radius:parseFloat(n?e.css(n):0),padding:parseFloat(t._content.css("padding-top")),borderColor:e.css("border-top-color"),backgroundColor:s.css("background-color"),backgroundOpacity:s.css("opacity"),spinner:{dimensions:{width:o.innerWidth(),height:o.innerHeight()}}},o.remove(),i.remove(),this._side=Position.getSide(t.options.position.tooltip)||"top",this._vars={}},destroy:function(){this.frames&&($.each("top right bottom left".split(" "),function(t,i){this["stem_"+i]&&this["stem_"+i].destroy()}.bind(this)),this.frames.remove(),this.frames=null)},build:function(){this.frames||(this.element.append(this.frames=$("<div>").addClass("tpd-frames")),$.each("top right bottom left".split(" "),function(t,i){this.insertFrame(i)}.bind(this)),this._spinner||this.tooltip._tooltip.append(this._spinner=$("<div>").addClass("tpd-spinner").hide().append($("<div>").addClass("tpd-spinner-spin"))))},_frame:function(){var e,t=$("<div>").addClass("tpd-frame").append(e=$("<div>").addClass("tpd-backgrounds").append($("<div>").addClass("tpd-background-shadow"))).append($("<div>").addClass("tpd-shift-stem").append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-before")).append($("<div>").addClass("tpd-stem")).append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-after")));return $.each("top right bottom left".split(" "),function(t,i){e.append($("<div>").addClass("tpd-background-box tpd-background-box-"+i).append($("<div>").addClass("tpd-background-box-shift").append($("<div>").addClass("tpd-background-box-shift-further").append($("<div>").addClass("tpd-background").append($("<div>").addClass("tpd-background-title")).append($("<div>").addClass("tpd-background-content"))).append($("<div>").addClass("tpd-background tpd-background-loading")).append($("<div>").addClass("tpd-background-border-hack").hide()))))}.bind(this)),t}(),_getFrame:function(t){var i=this._frame.clone();i.addClass("tpd-frame-"+t),i.find(".tpd-background-shadow").css({"border-radius":this._css.radius}),this.tooltip.options.stem&&i.find(".tpd-stem").attr("data-stem-position",t);var e=Math.max(this._css.radius-this._css.border,0);i.find(".tpd-background-title").css({"border-top-left-radius":e,"border-top-right-radius":e}),i.find(".tpd-background-content").css({"border-bottom-left-radius":e,"border-bottom-right-radius":e}),i.find(".tpd-background-loading").css({"border-radius":e});e={backgroundColor:this._css.borderColor};e["horizontal"===Position.getOrientation(t)?"height":"width"]=this._css.border+"px";return e[{top:"bottom",bottom:"top",left:"right",right:"left"}[t]]=0,i.find(".tpd-shift-stem-side").css(e),i},insertFrame:function(t){var i=this["frame_"+t]=this._getFrame(t);this.frames.append(i),this.tooltip.options.stem&&(i=i.find(".tpd-stem"),this["stem_"+t]=new Stem(i,this,{}))},startLoading:function(){this.tooltip.supportsLoading&&(this.build(),this._spinner||this.tooltip.is("resize-to-content")||this.setDimensions(this._css.spinner.dimensions),this._spinner&&this._spinner.show())},stopLoading:function(){this.tooltip.supportsLoading&&this._spinner&&(this.build(),this._spinner.hide())},updateBackground:function(){var t,i,e,s=this._vars.frames[this._side],o=$.extend({},s.background.dimensions);this.tooltip.title&&!this.tooltip.is("loading")?(this.element.find(".tpd-background-title, .tpd-background-content").show(),this.element.find(".tpd-background").css({"background-color":"transparent"}),t=$.extend({},o),i={"border-top-left-radius":e=Math.max(this._css.radius-this._css.border,0),"border-top-right-radius":e,"border-bottom-left-radius":e,"border-bottom-right-radius":e},s=new Visible(this.tooltip._tooltip),e=this.tooltip._titleWrapper.innerHeight(),t.height-=e,this.element.find(".tpd-background-title").css({height:e,width:o.width}),i["border-top-left-radius"]=0,i["border-top-right-radius"]=0,s.restore(),this.element.find(".tpd-background-content").css(t).css(i),this.element.find(".tpd-background-loading").css({"background-color":this._css.backgroundColor})):(this.element.find(".tpd-background-title, .tpd-background-content").hide(),this.element.find(".tpd-background").css({"background-color":this._css.backgroundColor})),this._css.border&&(this.element.find(".tpd-background").css({"border-color":"transparent"}),this.element.find(".tpd-background-border-hack").css({width:o.width,height:o.height,"border-radius":this._css.radius,"border-width":this._css.border,"border-color":this._css.borderColor}).show())},paint:function(){var t,i,e,s,o,n,h,r;this._paintedDimensions&&this._paintedDimensions.width===this._dimensions.width&&this._paintedDimensions.height===this._dimensions.height&&this._paintedStemPosition===this._stemPosition||(this._paintedDimensions=this._dimensions,this._paintedStemPosition=this._stemPosition,this.element.removeClass("tpd-visible-frame-top tpd-visible-frame-bottom tpd-visible-frame-left tpd-visible-frame-right").addClass("tpd-visible-frame-"+this._side),h=this._vars.frames[this._side],s=$.extend({},h.background.dimensions),this.element.find(".tpd-background").css(s),this.element.find(".tpd-background-shadow").css({width:s.width+2*this._css.border,height:s.height+2*this._css.border}),this.updateBackground(),this.element.find(".tpd-background-box-shift, .tpd-background-box-shift-further").removeAttr("style"),this.element.add(this.frames).add(this.tooltip._tooltip).css(h.dimensions),t=this._side,i=this._vars.frames[t],e=this.element.find(".tpd-frame-"+this._side),s=this._vars.frames[t].dimensions,e.css(s),e.find(".tpd-backgrounds").css($.extend({},i.background.position,{width:s.width-i.background.position.left,height:s.height-i.background.position.top})),s=Position.getOrientation(t),this.tooltip.options.stem&&(e.find(".tpd-shift-stem").css($.extend({},i.shift.dimensions,i.shift.position)),"vertical"===s?((o=e.find(".tpd-background-box-top, .tpd-background-box-bottom")).css({height:this._vars.cut,width:this._css.border}),e.find(".tpd-background-box-bottom").css({top:i.dimensions.height-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-top":-1*i.dimensions.height+this._vars.cut}),n="right"===t?i.dimensions.width-i.stemPx-this._css.border:0,o.css({left:n}).find(".tpd-background-box-shift").css({"margin-left":-1*n}),e.find(".tpd-background-box-"+("left"==t?"left":"right")).hide(),"right"===t?e.find(".tpd-background-box-left").css({width:i.dimensions.width-i.stemPx-this._css.border}):e.find(".tpd-background-box-right").css({"margin-left":this._css.border}).find(".tpd-background-box-shift").css({"margin-left":-1*this._css.border}),(r=e.find(".tpd-background-box-"+this._side)).css({height:i.dimensions.height-2*this._vars.cut,"margin-top":this._vars.cut}),r.find(".tpd-background-box-shift").css({"margin-top":-1*this._vars.cut})):((o=e.find(".tpd-background-box-left, .tpd-background-box-right")).css({width:this._vars.cut,height:this._css.border}),e.find(".tpd-background-box-right").css({left:i.dimensions.width-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-left":-1*i.dimensions.width+this._vars.cut}),n="bottom"===t?i.dimensions.height-i.stemPx-this._css.border:0,o.css({top:n}).find(".tpd-background-box-shift").css({"margin-top":-1*n}),e.find(".tpd-background-box-"+("top"===t?"top":"bottom")).hide(),"bottom"===t?e.find(".tpd-background-box-top").css({height:i.dimensions.height-i.stemPx-this._css.border}):e.find(".tpd-background-box-bottom").css({"margin-top":this._css.border}).find(".tpd-background-box-shift").css({"margin-top":-1*this._css.border}),(r=e.find(".tpd-background-box-"+this._side)).css({width:i.dimensions.width-2*this._vars.cut,"margin-left":this._vars.cut}),r.find(".tpd-background-box-shift").css({"margin-left":-1*this._vars.cut}))),h=(r=h.background).position,r=r.dimensions,this._spinner.css({top:h.top+this._css.border+(.5*r.height-.5*this._css.spinner.dimensions.height),left:h.left+this._css.border+(.5*r.width-.5*this._css.spinner.dimensions.width)}))},getVars:function(){this._css.padding,this._css.radius;var h=this._css.border,t=this._vars.maxStemHeight||0,r=$.extend({},this._dimensions||{}),a={frames:{},dimensions:r,maxStemHeight:t};a.cut=Math.max(this._css.border,this._css.radius)||0;var d={width:0,height:0},t=0,l=0;return this.tooltip.options.stem&&(d=this.stem_top.getMath().dimensions.outside,t=this.stem_top._css.offset,l=Math.max(d.height-this._css.border,0)),a.stemDimensions=d,a.stemOffset=t,$.each("top right bottom left".split(" "),function(t,i){var e="vertical"===Position.getOrientation(i),s={width:r.width+2*h,height:r.height+2*h},o=s[e?"height":"width"]-2*a.cut,n={dimensions:s,stemPx:l,position:{top:0,left:0},background:{dimensions:$.extend({},r),position:{top:0,left:0}}};switch((a.frames[i]=n).dimensions[e?"width":"height"]+=l,"top"!==i&&"left"!==i||(n.background.position[i]+=l),$.extend(n,{shift:{position:{top:0,left:0},dimensions:{width:e?d.height:o,height:e?o:d.height}}}),i){case"top":case"bottom":n.shift.position.left+=a.cut,"bottom"===i&&(n.shift.position.top+=s.height-h-l);break;case"left":case"right":n.shift.position.top+=a.cut,"right"===i&&(n.shift.position.left+=s.width-h-l)}}.bind(this)),a.connections={},$.each(Position.positions,function(t,i){a.connections[i]=this.getConnectionLayout(i,a)}.bind(this)),a},setDimensions:function(t){this.build();var i=this._dimensions;i&&i.width===t.width&&i.height===t.height||(this._dimensions=t,this._vars=this.getVars())},setSide:function(t){this._side=t,this._vars=this.getVars()},getConnectionLayout:function(t,i){var e=Position.getSide(t),s=Position.getOrientation(t),o=(i.dimensions,i.cut),n=this["stem_"+e],h=i.stemOffset,r=this.tooltip.options.stem?n.getMath().dimensions.outside.width:0,a=o+h+.5*r,n={stem:{}},d={left:0,right:0,up:0,down:0},l={top:0,left:0},p={top:0,left:0},c=i.frames[e],a=0;if("horizontal"==s){var u=c.dimensions.width;this.tooltip.options.stem&&(a=o+(h=(u=c.shift.dimensions.width)-r<2*h?Math.floor(.5*(u-r))||0:h)+.5*r);var f=u-2*h,m=h;switch((g=Position.split(t))[2]){case"left":d.right=f-r,l.left=a;break;case"middle":m+=Math.round(.5*f-.5*r),d.left=m-h,d.right=m-h,l.left=p.left=Math.round(.5*c.dimensions.width);break;case"right":m+=f-r,d.left=f-r,l.left=c.dimensions.width-a,p.left=c.dimensions.width}"bottom"===g[1]&&(l.top+=c.dimensions.height,p.top+=c.dimensions.height),$.extend(n.stem,{position:{left:m},before:{width:m},after:{left:m+r,width:u-m-r+1}})}else{u=c.dimensions.height;this.tooltip.options.stem&&(a=o+(h=(u=c.shift.dimensions.height)-r<2*h?Math.floor(.5*(u-r))||0:h)+.5*r);var g,b=u-2*h,_=h;switch((g=Position.split(t))[2]){case"top":d.down=b-r,l.top=a;break;case"middle":_+=Math.round(.5*b-.5*r),d.up=_-h,d.down=_-h,l.top=p.top=Math.round(.5*c.dimensions.height);break;case"bottom":_+=b-r,d.up=b-r,l.top=c.dimensions.height-a,p.top=c.dimensions.height}"right"===g[1]&&(l.left+=c.dimensions.width,p.left+=c.dimensions.width),$.extend(n.stem,{position:{top:_},before:{height:_},after:{top:_+r,height:u-_-r+1}})}return n.move=d,n.stem.connection=l,n.connection=p,n},setStemPosition:function(t,i){var e;this._stemPosition!==t&&(this._stemPosition=t,e=Position.getSide(t),this.setSide(e)),this.tooltip.options.stem&&this.setStemShift(t,i)},setStemShift:function(t,i){var e,s=this._shift,o=this._dimensions;s&&s.stemPosition===t&&s.shift.x===i.x&&s.shift.y===i.y&&o&&s.dimensions.width===o.width&&s.dimensions.height===o.height||(this._shift={stemPosition:t,shift:i,dimensions:o},e=Position.getSide(t),o={x:{left:"left",width:"width"},y:{left:"top",width:"height"}}[s={horizontal:"x",vertical:"y"}[Position.getOrientation(t)]],e=this["stem_"+e],t=deepExtend({},this._vars.connections[t].stem),i&&0!==i[s]&&(t.before[o.width]+=i[s],t.position[o.left]+=i[s],t.after[o.left]+=i[s],t.after[o.width]-=i[s]),e.element.css(t.position),e.element.siblings(".tpd-shift-stem-side-before").css(t.before),e.element.siblings(".tpd-shift-stem-side-after").css(t.after))}}),$.extend(Stem.prototype,{initialize:function(t,i){this.element=$(t),this.element[0]&&(this.skin=i,this.element.removeClass("tpd-stem-reset"),this._css=$.extend({},i._css,{width:this.element.innerWidth(),height:this.element.innerHeight(),offset:parseFloat(this.element.css("margin-left")),spacing:parseFloat(this.element.css("margin-top"))}),this.element.addClass("tpd-stem-reset"),this.options=$.extend({},arguments[2]||{}),this._position=this.element.attr("data-stem-position")||"top",this._m=100,this.build())},destroy:function(){this.element.html("")},build:function(){this.destroy();var t=this._css.backgroundColor,t=-1<t.indexOf("rgba")&&parseFloat(t.replace(/^.*,(.+)\)/,"$1"));this._useTransform=t&&t<1&&Support.css.transform,this._css.border||(this._useTransform=!1),this[(this._useTransform?"build":"buildNo")+"Transform"]()},buildTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append(this.downscale=$("<div>").addClass("tpd-stem-downscale").append(this.transform=$("<div>").addClass("tpd-stem-transform").append(this.first=$("<div>").addClass("tpd-stem-side").append(this.border=$("<div>").addClass("tpd-stem-border")).append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-triangle")))))),this.transform.append(this.last=this.first.clone().addClass("tpd-stem-side-inversed")),this.sides=this.first.add(this.last);var t=this.getMath(),i=t.dimensions,e=this._m,s=Position.getSide(this._position);this.element.find(".tpd-stem-spacer").css({width:i.inside.width,height:i.inside.height}),"top"!==s&&"left"!==s||(n={},"top"===s?(n.bottom=0,n.top="auto"):"left"===s&&(n.right=0,n.left="auto"),this.element.find(".tpd-stem-spacer").css(n)),this.transform.css({width:i.inside.width*e,height:i.inside.height*e});var o=Support.css.prefixed("transform"),s={"background-color":"transparent","border-bottom-color":this._css.backgroundColor,"border-left-width":.5*i.inside.width*e,"border-bottom-width":i.inside.height*e};s[o]="translate("+t.border*e+"px, 0)",this.element.find(".tpd-stem-triangle").css(s);var n=this._css.borderColor;alpha=-1<n.indexOf("rgba")&&parseFloat(n.replace(/^.*,(.+)\)/,"$1")),alpha&&alpha<1?n=(n.substring(0,n.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;s={"background-color":"transparent","border-right-width":t.border*e,width:t.border*e,"margin-left":-2*t.border*e,"border-color":n,opacity:alpha};s[o]="skew("+t.skew+"deg) translate("+t.border*e+"px, "+-1*this._css.border*e+"px)",this.element.find(".tpd-stem-border").css(s);n=this._css.borderColor;alpha=-1<n.indexOf("rgba")&&parseFloat(n.replace(/^.*,(.+)\)/,"$1")),alpha&&alpha<1?n=(n.substring(0,n.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;n={width:t.border*e,"border-right-width":t.border*e,"border-right-color":n,background:n,opacity:alpha,"margin-left":-2*t.border*e};n[o]="skew("+t.skew+"deg) translate("+t.border*e+"px, "+(i.inside.height-this._css.border)*e+"px)",this.element.find(".tpd-stem-border-corner").css(n),this.setPosition(this._position),1<e&&((h={})[o]="scale("+1/e+","+1/e+")",this.downscale.css(h));var h=/^(left|right)$/.test(this._position);this._css.border||this.element.find(".tpd-stem-border, .tpd-stem-border-corner").hide(),this.element.css({width:h?i.outside.height:i.outside.width,height:h?i.outside.width:i.outside.height})},buildNoTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append($("<div>").addClass("tpd-stem-notransform").append($("<div>").addClass("tpd-stem-border").append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-border-center-offset").append($("<div>").addClass("tpd-stem-border-center-offset-inverse").append($("<div>").addClass("tpd-stem-border-center"))))).append($("<div>").addClass("tpd-stem-triangle"))));var t=this.getMath(),i=t.dimensions,e=/^(left|right)$/.test(this._position),s=/^(bottom)$/.test(this._position),o=/^(right)$/.test(this._position),n=Position.getSide(this._position);this.element.css({width:e?i.outside.height:i.outside.width,height:e?i.outside.width:i.outside.height}),this.element.find(".tpd-stem-notransform").add(this.element.find(".tpd-stem-spacer")).css({width:e?i.inside.height:i.inside.width,height:e?i.inside.width:i.inside.height}),"top"!==n&&"left"!==n||(a={},"top"===n?(a.bottom=0,a.top="auto"):"left"===n&&(a.right=0,a.left="auto"),this.element.find(".tpd-stem-spacer").css(a)),this.element.find(".tpd-stem-border").css({width:"100%",background:"transparent"});var h={opacity:1};h[e?"height":"width"]="100%",h[e?"width":"height"]=this._css.border,h[s?"top":"bottom"]=0,$.extend(h,o?{left:0}:{right:0}),this.element.find(".tpd-stem-border-corner").css(h);var r,n={width:0,"background-color":"transparent",opacity:1},a=.5*i.inside.width+"px solid transparent",h={"background-color":"transparent"};i.inside.width,t.border;e?(r={left:"auto",top:"50%","margin-top":-.5*i.inside.width,"border-top":a,"border-bottom":a},$.extend(n,r),n[o?"right":"left"]=0,n[o?"border-left":"border-right"]=i.inside.height+"px solid "+this._css.borderColor,$.extend(h,r),h[o?"border-left":"border-right"]=i.inside.height+"px solid "+this._css.backgroundColor,h[o?"right":"left"]=t.top,h[o?"left":"right"]="auto",this.element.find(".tpd-stem-border-center-offset").css({"margin-left":-1*this._css.border*(o?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-left":this._css.border*(o?-1:1)})):(r={"margin-left":-.5*i.inside.width,"border-left":a,"border-right":a},$.extend(n,r),n[s?"border-top":"border-bottom"]=i.inside.height+"px solid "+this._css.borderColor,$.extend(h,r),h[s?"border-top":"border-bottom"]=i.inside.height+"px solid "+this._css.backgroundColor,h[s?"bottom":"top"]=t.top,h[s?"top":"bottom"]="auto",this.element.find(".tpd-stem-border-center-offset").css({"margin-top":-1*this._css.border*(s?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-top":this._css.border*(s?-1:1)})),this.element.find(".tpd-stem-border-center").css(n),this.element.find(".tpd-stem-border-corner").css({"background-color":this._css.borderColor}),this.element.find(".tpd-stem-triangle").css(h),this._css.border||this.element.find(".tpd-stem-border").hide()},setPosition:function(t){this._position=t,this.transform.attr("class","tpd-stem-transform tpd-stem-transform-"+t)},getMath:function(){var t=this._css.height,i=this._css.width,e=this._css.border;this._useTransform&&Math.floor(i)%2&&(i=Math.max(Math.floor(i)-1,0));var s=degrees(Math.atan(.5*i/t)),o={width:i+2*(e/Math.cos((90-(90-s))*Math.PI/180)),height:t+(r=e/Math.cos((90-s)*Math.PI/180))},t=(Math.max(e,this._css.radius),o.height),i=.5*o.width,n=degrees(Math.atan(t/i)),h=e/Math.cos((90-n)*Math.PI/180),s=180*Math.atan(t/i)/Math.PI,n=-1*(90-s),t=90-s,i=e*Math.tan(t*Math.PI/180),r=e/Math.cos((90-t)*Math.PI/180),s=$.extend({},o),t=$.extend({},o);return t.height+=this._css.spacing,t.height=Math.ceil(t.height),{enabled:o.width<=2*e?!1:!0,outside:t,dimensions:{inside:s,outside:t},top:r,border:h,skew:n,corner:i}}});var Tooltips={tooltips:{},options:{defaultSkin:"dark",startingZIndex:999999},_emptyClickHandler:function(){},init:function(){this.reset(),this._resizeHandler=this.onWindowResize.bind(this),$(window).bind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").bind("click",this._emptyClickHandler)},reset:function(){Tooltips.removeAll(),Delegations.removeAll(),this._resizeHandler&&$(window).unbind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").unbind("click",this._emptyClickHandler)},onWindowResize:function(){this._resizeTimer&&(window.clearTimeout(this._resizeTimer),this._resizeTimer=null),this._resizeTimer=_.delay(function(){var t=this.getVisible();$.each(t,function(t,i){i.clearUpdatedTo(),i.position()})}.bind(this),15)},_getTooltips:function(t,i){var e,s=[],o=[];return _.isElement(t)?(e=$(t).data("tipped-uids"))&&(s=s.concat(e)):$(t).each(function(t,i){(e=$(i).data("tipped-uids"))&&(s=s.concat(e))}),s[0]||i||(t=this.getTooltipByTooltipElement($(t).closest(".tpd-tooltip")[0]))&&t.element&&(e=$(t.element).data("tipped-uids")||[])&&(s=s.concat(e)),0<s.length&&$.each(s,function(t,i){(i=this.tooltips[i])&&o.push(i)}.bind(this)),o},findElement:function(t){var i=[];return(i=_.isElement(t)?this._getTooltips(t):i)[0]&&i[0].element},get:function(e){var t=$.extend({api:!1},arguments[1]||{}),s=[];return _.isElement(e)?s=this._getTooltips(e):e instanceof $?e.each(function(t,i){i=this._getTooltips(i,!0);0<i.length&&(s=s.concat(i))}.bind(this)):"string"==typeof e&&$.each(this.tooltips,function(t,i){i.element&&$(i.element).is(e)&&s.push(i)}),t.api&&$.each(s,function(t,i){i.is("api",!0)}),s},getTooltipByTooltipElement:function(e){if(!e)return null;var s=null;return $.each(this.tooltips,function(t,i){i.is("build")&&i._tooltip[0]===e&&(s=i)}),s},getBySelector:function(e){var s=[];return $.each(this.tooltips,function(t,i){i.element&&$(i.element).is(e)&&s.push(i)}),s},getNests:function(){var e=[];return $.each(this.tooltips,function(t,i){i.is("nest")&&e.push(i)}),e},show:function(t){$(this.get(t)).each(function(t,i){i.show(!1,!0)})},hide:function(t){$(this.get(t)).each(function(t,i){i.hide()})},toggle:function(t){$(this.get(t)).each(function(t,i){i.toggle()})},hideAll:function(e){$.each(this.getVisible(),function(t,i){e&&e===i||i.hide()})},refresh:function(t){t=t?$.grep(this.get(t),function(t){return t.is("visible")}):this.getVisible();$.each(t,function(t,i){i.refresh()})},getVisible:function(){var e=[];return $.each(this.tooltips,function(t,i){i.visible()&&e.push(i)}),e},isVisibleByElement:function(e){var s=!1;return _.isElement(e)&&$.each(this.getVisible()||[],function(t,i){if(i.element===e)return!(s=!0)}),s},getHighestTooltip:function(){var e,s=0;return $.each(this.tooltips,function(t,i){i.zIndex>s&&(s=i.zIndex,e=i)}),e},resetZ:function(){this.getVisible().length<=1&&$.each(this.tooltips,function(t,i){i.is("build")&&!i.options.zIndex&&i._tooltip.css({zIndex:i.zIndex=+Tooltips.options.startingZIndex})})},clearAjaxCache:function(){$.each(this.tooltips,function(t,i){i.options.ajax&&(i._cache&&i._cache.xhr&&(i._cache.xhr.abort(),i._cache.xhr=null),i.is("updated",!1),i.is("updating",!1),i.is("sanitized",!1))}.bind(this)),AjaxCache.clear()},add:function(t){this.tooltips[t.uid]=t},remove:function(t){t=this._getTooltips(t);this.removeTooltips(t)},removeTooltips:function(t){t&&$.each(t,function(t,i){var e=i.uid;delete this.tooltips[e],i.remove()}.bind(this))},removeDetached:function(){var t=this.getNests(),e=[];0<t.length&&$.each(t,function(t,i){i.is("detached")&&(e.push(i),i.attach())}),$.each(this.tooltips,function(t,i){i.element&&!_.element.isAttached(i.element)&&this.remove(i.element)}.bind(this)),$.each(e,function(t,i){i.detach()})},removeAll:function(){$.each(this.tooltips,function(t,i){i.element&&this.remove(i.element)}.bind(this)),this.tooltips={}},setDefaultSkin:function(t){this.options.defaultSkin=t||"dark"},setStartingZIndex:function(t){this.options.startingZIndex=t||0}};function Tooltip(){this.initialize.apply(this,_slice.call(arguments))}Tooltips.Position={inversedPosition:{left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},getInversedPosition:function(t){var i=Position.split(t),e=i[1],s=i[2],o=Position.getOrientation(t),i=$.extend({horizontal:!0,vertical:!0},arguments[1]||{});return"horizontal"===o?(i.vertical&&(e=this.inversedPosition[e]),i.horizontal&&(s=this.inversedPosition[s])):(i.vertical&&(s=this.inversedPosition[s]),i.horizontal&&(e=this.inversedPosition[e])),e+s},getTooltipPositionFromTarget:function(t){t=Position.split(t);return this.getInversedPosition(t[1]+this.inversedPosition[t[2]])}},$.extend(Tooltip.prototype,{supportsLoading:Support.css.transform&&Support.css.animation,initialize:function(element,content){var options,dataOptions,title,dt,SCRIPT_REGEX,uids,uids,uid,parentTooltipElement,parentTooltip,target;this.element=element,this.element&&("object"!=typeof content||_.isElement(content)||_.isText(content)||_.isDocumentFragment(content)||content instanceof $?options=arguments[2]||{}:(options=content,content=null),dataOptions=$(element).data("tipped-options"),dataOptions&&(options=deepExtend($.extend({},options),eval("({"+dataOptions+"})"))),this.options=Options.create(options),this._cache={dimensions:{width:0,height:0},events:[],timers:{},layouts:{},is:{},fnCallFn:"",updatedTo:{}},this.queues={showhide:$({})},title=$(element).attr("title")||$(element).data("tipped-restore-title"),content||(dt=$(element).attr("data-tipped"),dt?content=dt:title&&(content=title),content&&(SCRIPT_REGEX=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,content=content.replace(SCRIPT_REGEX,""))),!(!content||content instanceof $&&!content[0])||this.options.ajax&&this.options.ajax.url||this.options.inline?(title&&($(element).data("tipped-restore-title",title),$(element)[0].setAttribute("title","")),this.content=content,this.title=$(this.element).data("tipped-title"),void 0!==this.options.title&&(this.title=this.options.title),this.zIndex=this.options.zIndex||+Tooltips.options.startingZIndex,uids=$(element).data("tipped-uids"),uids=uids||[],uid=getUID(),this.uid=uid,uids.push(uid),$(element).data("tipped-uids",uids),parentTooltipElement=$(this.element).closest(".tpd-tooltip")[0],parentTooltipElement&&(parentTooltip=Tooltips.getTooltipByTooltipElement(parentTooltipElement))&&parentTooltip.is("nest",!0),target=this.options.target,this.target="mouse"!==target&&"element"!==target&&target?_.isElement(target)?target:target instanceof $&&target[0]?target[0]:this.element:this.element,this.options.inline&&(this.content=$("#"+this.options.inline)[0]),this.options.ajax&&(this.__content=this.content),"function"==typeof this.content&&(this._fn=this.content),this.preBuild(),Tooltips.add(this)):this._aborted=!0)},remove:function(){this.unbind(),this.clearTimers(),this.restoreElementToMarker(),this.stopLoading(),this.abort(),this.is("build")&&this._tooltip&&(this._tooltip.remove(),this._tooltip=null);var t=$(this.element).data("tipped-uids")||[],i=$.inArray(this.uid,t);-1<i&&(t.splice(i,1),$(this.element).data("tipped-uids",t)),t.length<1&&(e="tipped-restore-title",(t=$(this.element).data(e))&&(""!=!$(this.element)[0].getAttribute("title")&&$(this.element).attr("title",t),$(this.element).removeData(e)),$(this.element).removeData("tipped-uids"));var e=($(this.element).attr("class")||"").replace(/(tpd-delegation-uid-)\d+/g,"").replace(/^\s\s*/,"").replace(/\s\s*$/,"");$(this.element).attr("class",e)},detach:function(){this.options.detach&&!this.is("detached")&&(this._tooltip&&this._tooltip.detach(),this.is("detached",!0))},attach:function(){var t;this.is("detached")&&((t=!(t="string"==typeof this.options.container?("mouse"===(t=this.target)&&(t=this.element),$($(t).closest(this.options.container).first())):$(this.options.container))[0]?$(document.body):t).append(this._tooltip),this.is("detached",!1))},preBuild:function(){this.is("detached",!0);var t={left:"-10000px",top:"-10000px",opacity:0,zIndex:this.zIndex};this._tooltip=$("<div>").addClass("tpd-tooltip").addClass("tpd-skin-"+this.options.skin).addClass("tpd-size-"+this.options.size).css(t).hide(),this.createPreBuildObservers()},build:function(){this.is("build")||(this.attach(),this._tooltip.append(this._skin=$("<div>").addClass("tpd-skin")).append(this._contentWrapper=$("<div>").addClass("tpd-content-wrapper").append(this._contentSpacer=$("<div>").addClass("tpd-content-spacer").append(this._titleWrapper=$("<div>").addClass("tpd-title-wrapper").append(this._titleSpacer=$("<div>").addClass("tpd-title-spacer").append(this._titleRelative=$("<div>").addClass("tpd-title-relative").append(this._titleRelativePadder=$("<div>").addClass("tpd-title-relative-padder").append(this._title=$("<div>").addClass("tpd-title"))))).append(this._close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))).append(this._contentRelative=$("<div>").addClass("tpd-content-relative").append(this._contentRelativePadder=$("<div>").addClass("tpd-content-relative-padder").append(this._content=$("<div>").addClass("tpd-content"))).append(this._inner_close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))))),this.skin=new Skin(this),this._contentSpacer.css({"border-radius":Math.max(this.skin._css.radius-this.skin._css.border,0)}),this.createPostBuildObservers(),this.is("build",!0))},createPostBuildObservers:function(){this._tooltip.delegate(".tpd-close, .close-tooltip","click",function(t){t.stopPropagation(),t.preventDefault(),this.is("api",!1),this.hide(!0)}.bind(this))},createPreBuildObservers:function(){this.bind(this.element,"mouseenter",this.setActive),this.bind(this._tooltip,Support.touch&&Browser.MobileSafari?"touchstart":"mouseenter",this.setActive),this.bind(this.element,"mouseleave",function(t){this.setIdle(t)}),this.bind(this._tooltip,"mouseleave",function(t){this.setIdle(t)}),this.options.showOn&&($.each(this.options.showOn,function(t,i){var e,s=!1;switch(t){case"element":e=this.element,this.options.hideOn&&this.options.showOn&&"click"===this.options.hideOn.element&&"click"===this.options.showOn.element&&this.is("toggleable",s=!0);break;case"tooltip":e=this._tooltip;break;case"target":e=this.target}e&&i&&this.bind(e,i,"click"===i&&s?function(){this.is("api",!1),this.toggle()}:function(){this.is("api",!1),this.showDelayed()})}.bind(this)),Support.touch&&Browser.MobileSafari&&this.bind(this._tooltip,"touchend",function(){this._tooltipTouchEndTime=(new Date).getTime()})),this.options.hideOn&&$.each(this.options.hideOn,function(t,i){var e,s;switch(t){case"element":if(this.is("toggleable")&&"click"===i)return;e=this.element;break;case"tooltip":e=this._tooltip;break;case"target":e=this.target}e&&i&&(s=i,Support.touch&&Browser.MobileSafari&&/^(target|element)/.test(t)&&/mouse(leave|out)/.test(s)?this.bind(e,s,function(t){if(this._tooltipTouchEndTime&&/^mouse(leave|out)$/.test(t.type)&&(new Date).getTime()-this._tooltipTouchEndTime<450)return;this.is("api",!1),this.hideDelayed()}):this.bind(e,s,function(){this.is("api",!1),this.hideDelayed()}))}.bind(this)),this.options.hideOnClickOutside&&($(this.element).addClass("tpd-hideOnClickOutside"),this.bind(document.documentElement,"click touchend",function(t){this.visible()&&((t=$(t.target).closest(".tpd-tooltip, .tpd-hideOnClickOutside")[0])&&(t===this._tooltip[0]||t===this.element)||this.hide())}.bind(this))),"mouse"===this.options.target&&this.bind(this.element,"mouseenter mousemove",function(t){this._cache.event=t}.bind(this));var t=!1;(t=this.options.showOn&&"mouse"===this.options.target&&!this.options.fixed?!0:t)&&this.bind(this.element,"mousemove",function(){this.is("build")&&(this.is("api",!1),this.position())})}}),$.extend(Tooltip.prototype,{stop:function(){this._tooltip&&(this.queues.showhide.queue([]),this._tooltip.stop(1,0))},showDelayed:function(t){this.is("disabled")||(this.clearTimer("hide"),this.is("visible")||this.getTimer("show")||this.setTimer("show",function(){this.clearTimer("show"),this.show()}.bind(this),this.options.showDelay||1))},show:function(){var t;this.clearTimer("hide"),this.visible()||this.is("disabled")||!$(this.target).is(":visible")||(this.is("visible",!0),this.attach(),this.stop(),t=this.queues.showhide,this.is("updated")||this.is("updating")||t.queue(function(i){this._onResizeDimensions={width:0,height:0},this.update(function(t){if(t)return this.is("visible",!1),void this.detach();i()}.bind(this))}.bind(this)),t.queue(function(t){this.is("sanitized")?(this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),t()):(this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize(function(){this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),t()}.bind(this)))}.bind(this)),t.queue(function(t){this.position(),this.raise(),t()}.bind(this)),t.queue(function(t){var i;this.is("updated")&&"function"==typeof this.options.onShow&&(i=new Visible(this._tooltip),this.options.onShow(this._content[0],this.element),i.restore()),t()}.bind(this)),t.queue(function(t){this._show(this.options.fadeIn,function(){t()})}.bind(this)))},_show:function(t,i){t=("number"==typeof t?t:this.options.fadeIn)||0,i=i||"function"==typeof arguments[0]&&arguments[0],this.options.hideOthers&&Tooltips.hideAll(this),this._tooltip.fadeTo(t,1,function(){i&&i()}.bind(this))},hideDelayed:function(){this.clearTimer("show"),this.getTimer("hide")||!this.visible()||this.is("disabled")||this.setTimer("hide",function(){this.clearTimer("hide"),this.hide()}.bind(this),this.options.hideDelay||1)},hide:function(i,e){var t;this.clearTimer("show"),this.visible()&&!this.is("disabled")&&(this.is("visible",!1),this.stop(),(t=this.queues.showhide).queue(function(t){this.abort(),t()}.bind(this)),t.queue(function(t){this._hide(i,t)}.bind(this)),t.queue(function(t){Tooltips.resetZ(),t()}),t.queue(function(t){this.clearUpdatedTo(),t()}.bind(this)),"function"==typeof this.options.afterHide&&this.is("updated")&&t.queue(function(t){this.options.afterHide(this._content[0],this.element),t()}.bind(this)),this.options.cache||!this.options.ajax&&!this._fn||t.queue(function(t){this.is("updated",!1),this.is("updating",!1),this.is("sanitized",!1),t()}.bind(this)),"function"==typeof e&&t.queue(function(t){e(),t()}),t.queue(function(t){this.detach(),t()}.bind(this)))},_hide:function(t,i){i=i||"function"==typeof t&&t,this.attach(),this._tooltip.fadeTo(t?0:this.options.fadeOut,0,function(){this.stopLoading(),this.is("resize-to-content",!1),this._tooltip.hide(),i&&i()}.bind(this))},toggle:function(){this.is("disabled")||this[this.visible()?"hide":"show"]()},raise:function(){var t;!this.is("build")||this.options.zIndex||(t=Tooltips.getHighestTooltip())&&t!==this&&this.zIndex<=t.zIndex&&(this.zIndex=t.zIndex+1,this._tooltip.css({"z-index":this.zIndex}),this._tooltipShadow&&(this._tooltipShadow.css({"z-index":this.zIndex}),this.zIndex=t.zIndex+2,this._tooltip.css({"z-index":this.zIndex})))}}),$.extend(Tooltip.prototype,{createElementMarker:function(){!this.elementMarker&&this.content&&_.element.isAttached(this.content)&&($(this.content).data("tpd-restore-inline-display",$(this.content).css("display")),this.elementMarker=$("<div>").hide(),$(this.content).before($(this.elementMarker).hide()))},restoreElementToMarker:function(){var t;this.elementMarker&&this.content&&((t=$(this.content).data("tpd-restore-inline-display"))&&$(this.content).css({display:t}),$(this.elementMarker).before(this.content).remove())},startLoading:function(){this.is("loading")||(this.build(),this.is("loading",!0),this.options.spinner&&(this._tooltip.addClass("tpd-is-loading"),this.skin.startLoading(),this.is("resize-to-content")||(this.position(),this.raise(),this._show())))},stopLoading:function(){this.build(),this.is("loading",!1),this.options.spinner&&(this._tooltip.removeClass("tpd-is-loading"),this.skin.stopLoading())},abort:function(){this.abortAjax(),this.abortSanitize(),this.is("refreshed-before-sanitized",!1)},abortSanitize:function(){this._cache.voila&&(this._cache.voila.abort(),this._cache.voila=null)},abortAjax:function(){this._cache.xhr&&(this._cache.xhr.abort(),this._cache.xhr=null,this.is("updated",!1),this.is("updating",!1))},update:function(o){if(!this.is("updating")){this.is("updating",!0),this.build();var t=this.options.inline?"inline":this.options.ajax?"ajax":_.isElement(this.content)||_.isText(this.content)||_.isDocumentFragment(this.content)?"element":this._fn?"function":"html";switch(this._contentWrapper.css({visibility:"hidden"}),t){case"html":case"element":case"inline":if(this.is("updated"))return void(o&&o());this._update(this.content,o);break;case"function":if(this.is("updated"))return void(o&&o());var i=this._fn(this.element);if(!i)return this.is("updating",!1),void(o&&o(!0));this._update(i,o);break;case"ajax":var e=this.options.ajax||{},s=e.url||this.__content,n=e.data||{},t=e.type||"GET",i=e.dataType,n={url:s,data:n};t&&$.extend(n,{type:t}),i&&$.extend(n,{dataType:i});var h,r=$.extend({},n,e);if(r.method&&delete(r=$.extend({},r)).method,$.each("complete error success".split(" "),function(t,s){r[s]||(r[s]="success"===s?function(t,i,e){return e.responseText}:function(){}),r[s]=_.wrap(r[s],function(t){var i=_slice.call(arguments,1),e="object"==typeof i[0]?i[0]:i[2];e.statusText&&"abort"===e.statusText||(this.options.cache&&AjaxCache.set({url:r.url,type:r.type,data:r.data},s,i),this._cache.xhr=null,(i=t.apply(this,i))&&this._update(i,o))}.bind(this))}.bind(this)),this.options.cache&&(h=AjaxCache.get(r))&&h.callbacks.success)return void $.each(h.callbacks,function(t,i){"function"==typeof r[t]&&r[t].apply(this,i)}.bind(this));this.startLoading(),this._cache.xhr=$.ajax(r)}}},_update:function(t,i){var e={title:this.options.title,close:this.options.close};"string"==typeof t||_.isElement(t)||_.isText(t)||_.isDocumentFragment(t)||t instanceof $?e.content=t:$.extend(e,t);var t=e.content,s=e.title,e=e.close;this.content=t,this.title=s,this.close=e,this.createElementMarker(),(_.isElement(t)||t instanceof $)&&$(t).show(),this._content.html(this.content),this._title.html(s&&"string"==typeof s?s:""),this._titleWrapper[s?"show":"hide"](),this._close[(this.title||this.options.title)&&e?"show":"hide"]();t=e&&!(this.options.title||this.title),s=e&&!(this.options.title||this.title)&&"overlap"!==e,e=e&&(this.options.title||this.title)&&"overlap"!==e;this._inner_close[t?"show":"hide"](),this._tooltip[(s?"add":"remove")+"Class"]("tpd-has-inner-close"),this._tooltip[(e?"add":"remove")+"Class"]("tpd-has-title-close"),this._content[(this.options.padding?"remove":"add")+"Class"]("tpd-content-no-padding"),this.finishUpdate(i)},sanitize:function(i){if(!this.options.voila||this._content.find("img").length<1)return this.is("sanitized",!0),void(i&&i());this._cache.voila=Voila(this._content,{method:"onload"},function(t){this._markImagesAsSanitized(t.images),this.is("refreshed-before-sanitized")?(this.is("refreshed-before-sanitized",!1),this.sanitize(i)):(this.is("sanitized",!0),i&&i())}.bind(this))},_markImagesAsSanitized:function(t){$.each(t,function(t,i){var e=i.img;$(e).data("completed-src",i.img.src)})},_hasAllImagesSanitized:function(){var s=!0;return this._content.find("img").each(function(t,i){var e=$(i).data("completed-src");if(!e||i.src!==e)return s=!1}),s},refresh:function(){this.visible()&&(this.is("sanitized")?(this.is("refreshing",!0),this.clearTimer("refresh-spinner"),!this.options.voila||this._content.find("img").length<1||this._hasAllImagesSanitized()?(this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)):(this.is("sanitized",!1),this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize(function(){this._contentWrapper.css({visibility:"visible"}),this.stopLoading(),this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)}.bind(this)))):this.is("refreshed-before-sanitized",!0))},finishUpdate:function(t){var i;this.is("updated",!0),this.is("updating",!1),"function"==typeof this.options.afterUpdate&&((i=this._contentWrapper.css("visibility"))&&this._contentWrapper.css({visibility:"visible"}),this.options.afterUpdate(this._content[0],this.element),i&&this._contentWrapper.css({visibility:"hidden"})),t&&t()}}),$.extend(Tooltip.prototype,{clearUpdatedTo:function(){this._cache.updatedTo={}},updateDimensionsToContent:function(t,i){this.skin.build();var e,s,o,n,h,r,a,d,l,p,c,u,f,m=this.is("loading"),g=this._cache.updatedTo;(this._maxWidthPass||this.is("api")||this.is("should-update-dimensions")||g.stemPosition!==i||g.loading!==m)&&(m&&this.is("resize-to-content")||(this._cache.updatedTo={type:this.is("resize-to-content")?"content":"spinner",loading:this.is("loading"),stemPosition:i},this.is("should-update-dimensions")&&this.is("should-update-dimensions",!1),t=t||this.options.position.target,i=i||this.options.position.tooltip,c=Position.getSide(i),p=Position.getOrientation(i),u=this.skin._css.border,this._tooltip.addClass("tpd-tooltip-measuring"),f=this._tooltip.attr("style"),this._tooltip.removeAttr("style"),e={top:u,right:u,bottom:u,left:u},h=0,"vertical"===Position.getOrientation(i)&&(this.options.stem&&(e[c]=this.skin["stem_"+c].getMath().dimensions.outside.height),(d=this.getMouseRoom())[Position._flip[c]]&&(e[c]+=d[Position._flip[c]]),s=this.getContainmentLayout(i),o=this.getPaddingLine(t),n=!1,Position.isPointWithinBoxLayout(o.x1,o.y1,s)||Position.isPointWithinBoxLayout(o.x2,o.y2,s)?n=!0:$.each("top right bottom left".split(" "),function(t,i){i=this.getSideLine(s,i);if(Position.intersectsLine(o.x1,o.y1,o.x2,o.y2,i.x1,i.y1,i.x2,i.y2))return!(n=!0)}.bind(this)),n&&(h="left"===c?o.x1-s.position.left:s.position.left+s.dimensions.width-o.x1,e[c]+=h)),this.options.offset&&("vertical"!==p||0!==(l=Position.adjustOffsetBasedOnPosition(this.options.offset,this.options.position.target,t)).x&&(e.right+=Math.abs(l.x))),this.options.containment&&(h=this.options.containment.padding)&&($.each(e,function(t,i){e[t]+=h}),"vertical"===p?e["left"===c?"left":"right"]-=h:e["top"===c?"top":"bottom"]-=h),r=Bounds.viewport(),a={width:0,height:0},this.close&&"overlap"!==this.close&&!this.title&&(a=this._innerCloseDimensions||{width:this._inner_close.outerWidth(!0),height:this._inner_close.outerHeight(!0)},this._innerCloseDimensions=a),this._contentRelativePadder.css({"padding-right":a.width}),this._contentSpacer.css({width:r.width-e.left-e.right}),g={width:this._content.innerWidth()+a.width,height:Math.max(this._content.innerHeight(),a.height||0)},m={width:0,height:0},this.title&&(d={width:0,height:0},this._titleWrapper.add(this._titleSpacer).css({width:"auto",height:"auto"}),this.close&&"overlap"!==this.close&&(d={width:this._close.outerWidth(!0),height:this._close.outerHeight(!0)},this._close.hide()),this._maxWidthPass&&g.width>this.options.maxWidth&&this._titleRelative.css({width:g.width}),this._titleRelativePadder.css({"padding-right":d.width}),l=parseFloat(this._titleWrapper.css("border-bottom-width")),(m={width:this.title?this._titleWrapper.innerWidth():0,height:Math.max(this.title?this._titleWrapper.innerHeight()+l:0,d.height+l)}).width>r.width-e.left-e.right&&(m.width=r.width-e.left-e.right,this._titleSpacer.css({width:m.width}),m.height=Math.max(this.title?this._titleWrapper.innerHeight()+l:0,d.height+l)),g.width=Math.max(m.width,g.width),g.height+=m.height,this._titleWrapper.css({height:Math.max(this.title?this._titleWrapper.innerHeight():0,d.height)}),this.close&&this._close.show()),this.options.stem&&(p="vertical"===p?"height":"width",c=this.skin["stem_"+c].getMath().outside.width+2*this.skin._css.radius,g[p]<c&&(g[p]=c)),this._contentSpacer.css({width:g.width}),g.height!==Math.max(this._content.innerHeight(),a.height)+(this.title?this._titleRelative.outerHeight():0)&&g.width++,this.is("resize-to-content")||(g=this.skin._css.spinner.dimensions),this.setDimensions(g),e={top:u,right:u,bottom:u,left:u},this.options.stem&&(u=Position.getSide(i),e[u]=this.skin.stem_top.getMath().dimensions.outside.height),this._contentSpacer.css({"margin-top":e.top,"margin-left":+e.left,width:g.width}),(this.title||this.close)&&this._titleWrapper.css({height:this._titleWrapper.innerHeight(),width:g.width}),this._tooltip.removeClass("tpd-tooltip-measuring"),this._tooltip.attr("style",f),f=this._contentRelative.add(this._titleRelative),this.options.maxWidth&&g.width>this.options.maxWidth&&!this._maxWidthPass&&this.is("resize-to-content")&&(f.css({width:this.options.maxWidth}),this._maxWidthPass=!0,this.updateDimensionsToContent(t,i),this._maxWidthPass=!1,f.css({width:"auto"}))))},setDimensions:function(t){this.skin.setDimensions(t)},getContainmentSpace:function(t,i){var e=this.getContainmentLayout(t,i),s=this.getTargetLayout(),o=s.position,t=s.dimensions,i=e.position,s=e.dimensions,e={top:Math.max(o.top-i.top,0),bottom:Math.max(i.top+s.height-(o.top+t.height),0),left:Math.max(o.left-i.left,0),right:Math.max(i.left+s.width-(o.left+t.width),0)};return o.top>i.top+s.height&&(e.top-=o.top-(i.top+s.height)),o.top+t.height<i.top&&(e.bottom-=i.top-(o.top+t.height)),o.left>i.left+s.width&&i.left+s.width>=o.left&&(e.left-=o.left-(i.left+s.width)),o.left+t.width<i.left&&(e.right-=i.left-(o.left+t.width)),this._cache.layouts.containmentSpace=e},position:function(t){var i,e,s,o,n,h,r,a,d,l,p,c;this.visible()&&(this.is("positioning",!0),this._cache.layouts={},this._cache.dimensions,h=this.options.position.target,n=this.options.position.tooltip,c=n,this.updateDimensionsToContent(p=h,c),i=deepExtend(this.getPositionBasedOnTarget(p,c)),e=[],this.options.containment?(s=!{},o={},$.each("top right bottom left".split(" "),function(t,i){(o[i]=this.isSideWithinContainment(i,c,!0))&&(s=!0)}.bind(this)),s||(i.contained=!0),i.contained?this.setPosition(i):(e.unshift({position:i,targetPosition:p,stemPosition:c}),p=Position.flip(h),c=Position.flip(n),o[Position.getSide(p)]?(this.updateDimensionsToContent(p,c),i=this.getPositionBasedOnTarget(p,c)):i.contained=!1,i.contained?this.setPosition(i,c):(e.unshift({position:i,targetPosition:p,stemPosition:c}),r=h,r=((n=this.getContainmentSpace(c,!0))[(h="horizontal"===Position.getOrientation(r)?["left","right"]:["top","bottom"])[0]]===n[h[1]]?"horizontal"===Position.getOrientation(r)?"left":"top":h[n[h[0]]>n[h[1]]?0:1])+Position.split(r)[1],c=Position.flip(p=r),o[Position.getSide(p)]?(this.updateDimensionsToContent(p,c),i=this.getPositionBasedOnTarget(p,c)):i.contained=!1,i.contained?this.setPosition(i,c):(e.unshift({position:i,targetPosition:p,stemPosition:c}),d=[],$.each(e,function(t,i){var e,s;0<=i.position.top&&0<=i.position.left?a=i:(e=0<=i.position.top?1:Math.abs(i.position.top),s=0<=i.position.left?1:Math.abs(i.position.left),d.push({result:i,negativity:e*s}))}),a||(l=d[d.length-1],$.each(d,function(t,i){i.negativity<l.negativity&&(l=i)}),a=l.result),this.updateDimensionsToContent(a.targetPosition,a.stemPosition,!0),this.setPosition(a.position,a.stemPosition))))):this.setPosition(i),this._cache.dimensions=this.skin._vars.dimensions,this.skin.paint(),this.is("positioning",!1))},getPositionBasedOnTarget:function(t,i){i=i||this.options.position.tooltip;var e,s=this.getTargetDimensions(),o={left:0,top:0},n={left:0,top:0},h=(Position.getSide(t),this.skin._vars),r=h.frames[Position.getSide(i)],a=Position.getOrientation(t),d=Position.split(t);if("horizontal"===a){switch(e=Math.floor(.5*s.width),d[2]){case"left":n.left=e;break;case"middle":o.left=s.width-e,n.left=o.left;break;case"right":o.left=s.width,n.left=s.width-e}"bottom"===d[1]&&(o.top=s.height,n.top=s.height)}else{switch(e=Math.floor(.5*s.height),d[2]){case"top":n.top=e;break;case"middle":o.top=s.height-e,n.top=o.top;break;case"bottom":n.top=s.height-e,o.top=s.height}"right"===d[1]&&(o.left=s.width,n.left=s.width)}var l=this.getTargetPosition(),p=$.extend({},s,{top:l.top,left:l.left,connection:o,max:n}),c={width:r.dimensions.width,height:r.dimensions.height,top:0,left:0,connection:h.connections[i].connection,stem:h.connections[i].stem};c.top=p.top+p.connection.top,c.left=p.left+p.connection.left,c.top-=c.connection.top,c.left-=c.connection.left,this.options.stem&&(y=h.stemDimensions.width,x={stem:{top:c.top+c.stem.connection.top,left:c.left+c.stem.connection.left},connection:{top:p.top+p.connection.top,left:p.left+p.connection.left},max:{top:p.top+p.max.top,left:p.left+p.max.left}},Position.isPointWithinBox(x.stem.left,x.stem.top,x.connection.left,x.connection.top,x.max.left,x.max.top)||(x={stem:{top:c.top+c.stem.connection.top,left:c.left+c.stem.connection.left},connection:{top:p.top+p.connection.top,left:p.left+p.connection.left},max:{top:p.top+p.max.top,left:p.left+p.max.left}},w={connection:Position.getDistance(x.stem.left,x.stem.top,x.connection.left,x.connection.top),max:Position.getDistance(x.stem.left,x.stem.top,x.max.left,x.max.top)},m=Math.min(w.connection,w.max),u=x[w.connection<=w.max?"connection":"max"],f="horizontal"===Position.getOrientation(i)?"left":"top",y<=Position.getDistance(x.connection.left,x.connection.top,x.max.left,x.max.top)?(g=u[f]<x.stem[f]?-1:1,(T={top:0,left:0})[f]=m*g,T[f]+=Math.floor(.5*y)*g,c.left+=T.left,c.top+=T.top):($.extend(x,{center:{top:Math.round(p.top+.5*s.height),left:Math.round(p.left+.5*s.left)}}),m=w[Position.getDistance(x.center.left,x.center.top,x.connection.left,x.connection.top)<=Position.getDistance(x.center.left,x.center.top,x.max.left,x.max.top)?"connection":"max"],g=u[f]<x.stem[f]?-1:1,(b={top:0,left:0})[f]=m*g,c.left+=b.left,c.top+=b.top))),this.options.offset&&(_=$.extend({},this.options.offset),_=Position.adjustOffsetBasedOnPosition(_,this.options.position.target,t),c.top+=_.y,c.left+=_.x);var u,f,m,g,b,_,v,x,w,y,T,k,a=this.getContainment({top:c.top,left:c.left},i),d=a.horizontal&&a.vertical,l={x:0,y:0},r=Position.getOrientation(i);return a[r]||(p=(T="horizontal"===r)?["left","right"]:["up","down"],w=T?"left":"top",f=a.correction[u=T?"x":"y"],g=(m=this.getContainmentLayout(i)).position[T?"left":"top"],0!==f&&(f*(b=f<0?-1:1)<=(r=(_=h.connections[i].move)[p[-1*f<0?0:1]])&&c[w]+f>=g?(c[w]+=f,l[u]=-1*f,d=!0):Position.getOrientation(t)===Position.getOrientation(i)&&(c[w]+=r*b,l[u]=r*b*-1,c[w]<g&&(v=g-c[w],_=_[p[0]]+_[p[1]],v=Math.min(v,_),c[w]+=v,(_=l[u]-v)>=h.connections[i].move[p[0]]&&_<=h.connections[i].move[p[1]]&&(l[u]-=v)),p=(a=this.getContainment({top:c.top,left:c.left},i)).correction[u],v=deepExtend({},c),this.options.offset&&(v.left-=this.options.offset.x,v.top-=this.options.offset.y),(x={stem:{top:v.top+c.stem.connection.top,left:v.left+c.stem.connection.left}}).stem[w]+=l[u],w=this.getTargetLayout(),y=h.stemDimensions.width,y=Math.floor(.5*y),T=g+m.dimensions[T?"width":"height"],"x"==u?(k=w.position.left+y,0<p&&(k+=w.dimensions.width-2*y),(p<0&&x.stem.left+p>=k&&v.left+p>=g||0<p&&x.stem.left+p<=k&&v.left+p<=T)&&(v.left+=p)):(k=w.position.top+y,0<p&&(k+=w.dimensions.height-2*y),(p<0&&x.stem.top+p>=k&&v.top+p>=g||0<p&&x.stem.top+p<=k&&v.top+p<=T)&&(v.top+=p)),c=v,this.options.offset&&(c.left+=this.options.offset.x,c.top+=this.options.offset.y))),d=(a=this.getContainment({top:c.top,left:c.left},i)).horizontal&&a.vertical),{top:c.top,left:c.left,contained:d,shift:l}},setPosition:function(t,i){var e,s,o,n=this._position;n&&n.top===t.top&&n.left===t.left||(this.options.container!==document.body&&(o="string"==typeof this.options.container?("mouse"===(e=this.target)&&(e=this.element),$($(e).closest(this.options.container).first())):$(o))[0]&&(s=$(o).offset(),n=Math.round(s.top),e=Math.round(s.left),s=Math.round($(o).scrollTop()),o=Math.round($(o).scrollLeft()),t.top-=n,t.top+=s,t.left-=e,t.left+=o),this._position=t,this._tooltip.css({top:t.top,left:t.left})),this.skin.setStemPosition(i||this.options.position.tooltip,t.shift||{x:0,y:0})},getSideLine:function(t,i){var e=t.position.left,s=t.position.top,o=t.position.left,n=t.position.top;switch(i){case"top":o+=t.dimensions.width;break;case"bottom":s+=t.dimensions.height,o+=t.dimensions.width,n+=t.dimensions.height;break;case"left":n+=t.dimensions.height;break;case"right":e+=t.dimensions.width,o+=t.dimensions.width,n+=t.dimensions.height}return{x1:e,y1:s,x2:o,y2:n}},isSideWithinContainment:function(t,i,e){var s=this.getContainmentLayout(i,e),e=this.getTargetLayout(),o=this.getSideLine(e,t);if(Position.isPointWithinBoxLayout(o.x1,o.y1,s)||Position.isPointWithinBoxLayout(o.x2,o.y2,s))return!0;var n=!1;return $.each("top right bottom left".split(" "),function(t,i){i=this.getSideLine(s,i);if(Position.intersectsLine(o.x1,o.y1,o.x2,o.y2,i.x1,i.y1,i.x2,i.y2))return!(n=!0)}.bind(this)),n},getContainment:function(t,i){var e,s={horizontal:!0,vertical:!0,correction:{y:0,x:0}};return this.options.containment&&(e=this.getContainmentLayout(i),i=this.skin._vars.frames[Position.getSide(i)].dimensions,this.options.containment&&((t.left<e.position.left||t.left+i.width>e.position.left+e.dimensions.width)&&(s.horizontal=!1,t.left<e.position.left?s.correction.x=e.position.left-t.left:s.correction.x=e.position.left+e.dimensions.width-(t.left+i.width)),(t.top<e.position.top||t.top+i.height>e.position.top+e.dimensions.height)&&(s.vertical=!1,t.top<e.position.top?s.correction.y=e.position.top-t.top:s.correction.y=e.position.top+e.dimensions.height-(t.top+i.height)))),s},getContainmentLayout:function(t,i){var e={top:$(window).scrollTop(),left:$(window).scrollLeft()},s=this.target;"mouse"===s&&(s=this.element);s=$(s).closest(this.options.containment.selector).first()[0],s=s&&"viewport"!==this.options.containment.selector?{dimensions:{width:$(s).innerWidth(),height:$(s).innerHeight()},position:$(s).offset()}:{dimensions:Bounds.viewport(),position:e},e=this.options.containment.padding;return!e||i||(e=(i=Math.max(s.dimensions.height,s.dimensions.width))<2*e?Math.max(Math.floor(.5*i),0):e)&&(s.dimensions.width-=2*e,s.dimensions.height-=2*e,s.position.top+=e,s.position.left+=e,"vertical"===Position.getOrientation(t)?(s.dimensions.width+=e,"left"===Position.getSide(t)&&(s.position.left-=e)):(s.dimensions.height+=e,"top"===Position.getSide(t)&&(s.position.top-=e))),this._cache.layouts.containmentLayout=s},getMouseRoom:function(){var t,i,e,s,o={top:0,left:0,right:0,bottom:0};return"mouse"!==this.options.target||this.is("api")||(t=Mouse.getActualPosition(this._cache.event),i=$(this.element).offset(),e=$(this.element).innerWidth(),s=$(this.element).innerHeight(),o={top:Math.max(0,t.top-i.top),bottom:Math.max(0,i.top+s-t.top),left:Math.max(0,t.left-i.left),right:Math.max(0,i.left+e-t.left)}),o},getTargetPosition:function(){var t="mouse"===this.options.target?this.is("api")?(t=$(this.element).offset(),{top:Math.round(t.top),left:Math.round(t.left)}):Mouse.getPosition(this._cache.event):(t=$(this.target).offset(),{top:Math.round(t.top),left:Math.round(t.left)});return this._cache.layouts.targetPosition=t},getTargetDimensions:function(){if(this._cache.layouts.targetDimensions)return this._cache.layouts.targetDimensions;var t="mouse"===this.options.target?Mouse.getDimensions():{width:$(this.target).innerWidth(),height:$(this.target).innerHeight()};return this._cache.layouts.targetDimensions=t},getTargetLayout:function(){if(this._cache.layouts.targetLayout)return this._cache.layouts.targetLayout;var t={position:this.getTargetPosition(),dimensions:this.getTargetDimensions()};return this._cache.layouts.targetLayout=t},getPaddingLine:function(t){var i=this.getTargetLayout(),e="left";if("vertical"===Position.getOrientation(t))return this.getSideLine(i,Position.getSide(t));if(Position.isCorner(t)){t=Position.inverseCornerPlane(t),e=Position.getSide(t);return this.getSideLine(i,e)}e=this.getSideLine(i,e),i=Math.round(.5*i.dimensions.width);return e.x1+=i,e.x2+=i,e}}),$.extend(Tooltip.prototype,{setActive:function(){this.is("active",!0),this.visible()&&this.raise(),this.options.hideAfter&&this.clearTimer("idle")},setIdle:function(){this.is("active",!1),this.options.hideAfter&&this.setTimer("idle",function(){this.clearTimer("idle"),this.is("active")||this.hide()}.bind(this),this.options.hideAfter)}}),$.extend(Tooltip.prototype,{bind:function(t,i,e,s){s=e.bind(s||this);this._cache.events.push({element:t,eventName:i,handler:s}),$(t).on(i,s)},unbind:function(){$.each(this._cache.events,function(t,i){$(i.element).off(i.eventName,i.handler)}),this._cache.events=[]}}),$.extend(Tooltip.prototype,{disable:function(){this.is("disabled")||this.is("disabled",!0)},enable:function(){this.is("disabled")&&this.is("disabled",!1)}}),$.extend(Tooltip.prototype,{is:function(t,i){return"boolean"==typeof i&&(this._cache.is[t]=i),this._cache.is[t]},visible:function(){return this.is("visible")}}),$.extend(Tooltip.prototype,{setTimer:function(t,i,e){this._cache.timers[t]=_.delay(i,e)},getTimer:function(t){return this._cache.timers[t]},clearTimer:function(t){this._cache.timers[t]&&(clearTimeout(this._cache.timers[t]),delete this._cache.timers[t])},clearTimers:function(){$.each(this._cache.timers,function(t,i){clearTimeout(i)}),this._cache.timers={}}}),$.extend(Tipped,{init:function(){Tooltips.init()},create:function(t,e){var s=$.extend({},arguments[2]||{}),o=[];return _.isElement(t)?o.push(new Tooltip(t,e,s)):$(t).each(function(t,i){o.push(new Tooltip(i,e,s))}),new Collection(o)},get:function(t){return new Collection(Tooltips.get(t))},findElement:function(t){return Tooltips.findElement(t)},hideAll:function(){return Tooltips.hideAll(),this},setDefaultSkin:function(t){return Tooltips.setDefaultSkin(t),this},visible:function(t){if(_.isElement(t))return Tooltips.isVisibleByElement(t);if(void 0===t)return Tooltips.getVisible().length;var t=$(t),e=0;return $.each(t,function(t,i){Tooltips.isVisibleByElement(i)&&e++}),e},clearAjaxCache:function(){return Tooltips.clearAjaxCache(),this},refresh:function(t,i,e){return Tooltips.refresh(t,i,e),this},setStartingZIndex:function(t){return Tooltips.setStartingZIndex(t),this},remove:function(t){return Tooltips.remove(t),this}}),$.each("show hide toggle disable enable".split(" "),function(t,i){Tipped[i]=function(t){return this.get(t)[i](),this}}),$.extend(Tipped,{delegate:function(){Delegations.add.apply(Delegations,_slice.call(arguments))},undelegate:function(){Delegations.remove.apply(Delegations,_slice.call(arguments))}});var Delegations={_uid:0,_delegations:{},add:function(t,e,s){"object"!=typeof e||_.isElement(e)?s=arguments[2]||{}:(s=e,e=null);var o=++this._uid,i=Options.create($.extend({},s));this._delegations[o]={uid:o,selector:t,content:e,options:i};function n(t){$(this).addClass("tpd-delegation-uid-"+o);var i=new Tooltip(this,e,s);i._cache.event=t,i.setActive(),i.showDelayed()}this._delegations[o].removeTitleHandler=this.removeTitle.bind(this),$(document).on("mouseenter",t+":not(.tpd-delegation-uid-"+o+")",this._delegations[o].removeTitleHandler),this._delegations[o].handler=n,$(document).on(i.showOn.element,t+":not(.tpd-delegation-uid-"+o+")",n)},removeTitle:function(t){var i=t.currentTarget,t=$(i).attr("title");t&&($(i).data("tipped-restore-title",t),$(i)[0].setAttribute("title",""))},remove:function(e){$.each(this._delegations,function(t,i){i.selector===e&&($(document).off("mouseenter",e+":not(.tpd-delegation-uid-"+t+")",i.removeTitleHandler).off(i.options.showOn.element,e+":not(.tpd-delegation-uid-"+t+")",i.handler),delete this._delegations[t])}.bind(this))},removeAll:function(){$.each(this._delegations,function(t,i){$(document).off("mouseenter",i.selector+":not(.tpd-delegation-uid-"+t+")",i.removeTitleHandler).off(i.options.showOn.element,i.selector+":not(.tpd-delegation-uid-"+t+")",i.handler),delete this._delegations[t]}.bind(this))}};function Collection(){this.initialize.apply(this,_slice.call(arguments))}return $.extend(Collection.prototype,{initialize:function(t){return this.tooltips=t,this},items:function(){return $.each(this.tooltips,function(t,i){i.is("api",!0)}),this.tooltips},refresh:function(){return $.each(this._tooltips,function(t,i){i.is("visible")&&i.refresh()}),this},remove:function(){return Tooltips.removeTooltips(this.tooltips),this.tooltips=[],this}}),$.each("show hide toggle disable enable".split(" "),function(t,e){Collection.prototype[e]=function(){return $.each(this.tooltips,function(t,i){i.is("api",!0),i[e]()}),this}}),Tipped.init(),Tipped});